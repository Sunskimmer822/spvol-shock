# SP-VolShock
### Serena's Python Volume-Based Shocker
This is a program developed by yours truly which enables pishock devices to be triggered if someone gets a little too loud!



# Setup
On first run, sp-volshock will warn of missing configuration data. This is to be expected, as sp-volshock does not ship with a username, pishock API key, or pishock share code. See [Configuration](#configuration) and [CLI Configuration](#cli-configuration) for more info.



# Configuration
All configuration should be done by directly changing values in `environment.py` or via [CLI configuration](#cli-configuration). Consult the handy below table for more info.

| Field              | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | Accepted Values | CLI key(s)                | Default Value |
|--------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------|---------------------------|---------------|
| username           | The pishock username to be displayed on the website and in logs                                                                                                                                                                                                                                                                                                                                                                                                                | String          | -u, --username            | none          |
| api_key            | The pishock API key used to access the API. This can be found at the `Generate API Key` button on your [pishock account page](https://pishock.com/#/account).                                                                                                                                                                                                                                                                                                                  | String          | -a, --api_key             | none          |
| share_code         | The share code of the shocker you want to access. This is found from the `Share` button on your [pishock control page](https://pishock.com/#/control).                                                                                                                                                                                                                                                                                                                         | String          | -c, --share_code          | none          |
| shock_enabled      | Whether to send a shock to the collar or not. If true, send a shock. Otherwise, the shocker will only vibrate.                                                                                                                                                                                                                                                                                                                                                                 | Boolean         | -s, --enable-shock        | True          |
| disable_on_trigger | Whether to stop checking volume levels while a shock/vibration is being administered. It is recommended to keep this enabled.                                                                                                                                                                                                                                                                                                                                                  | Boolean         | -w, --wait-while-shocking | True          |
| trigger_power      | The percent power to use when administering a shock/vibration. If the shocker has limits under the provided value, the value will be set to the shocker's reported maximum intensity.                                                                                                                                                                                                                                                                                          | Integer [0,100] | -p, --power               | 20            |
| trigger_duration   | The duration in seconds to administer a shock/vibration for. If the shocker has limits under the provided value, the value will be set to the shocker's reported maximum duration.                                                                                                                                                                                                                                                                                             | Float [0,15]    | -d, --duration            | 0.3           |
| breakout_keycode   | The keycode to listen for during the main shocking loop. This will safely destroy the audio device and ensure a clean shutdown, but a conventional keyboard interrupt is still possible. For a list of these, [this](https://www.foreui.com/articles/Key_Code_Table.htm) is a handy source. <br/>~~Currently, Linux and other UNIX-like systems must use a conventional keyboard interrupt (eg. CTRL + C) to break the program due to reliance on MSVCRT's getch() function.~~ | Integer [0,249] | -k, --interrupt-keycode   | 27 (ESC)      |


# CLI Configuration
sp-volshock supports full configuration from the command line. To configure sp-volshock from the command line, run sp-volshock using conventional Linux/UNIX argument formatting (eg. `python sp-volshock.py -p 69 --share-code BOOBS -d 3.22`). All option names are available in the [configuration table](#configuration) or the help dialogue.


# Contribution
When you make a pull request, please ensure that the `username`, `api_key`, and `share_code` fields in `environment.py` are empty Strings, or your request may not be merged.